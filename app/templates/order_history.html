{% extends "base.html" %}

{% block role %} <div id="roleData" data-my-variable="{{ role }}"></div> {% endblock %}

{% block content %}
<br><br>
  {% if current_user.is_authenticated %}
    {% if role == 0 %}
      {% if rows %}
        <h2>Your Order History So Far:</h2>
        <table class='table table-hover table-bordered container'>
          <thead class="thead-dark">
            <tr>
              <th scope="col">Order Id</th>
              <th scope="col">Order Time</th>
              <th scope="col">Total Amount</th>
              <th scope="col">Total Items</th>
              <th scope="col">Fulfillment Status</th>
              <th scope="col">More Details</th>
            </tr>
          </thead>
          <tbody>
            {% for row in rows %}
            <tr>
              <td>{{ row.order_id }}</td>
              <td>{{ row.order_placing_time }}</td>
              <td>{{ row.total_amount }}</td>
              <td>{{ row.total_items }}</td>
              <td>{{ row.fulfillment_status }}</td>
              <td>
                <a href="{{ url_for('seller.order_details', oid=row.order_id) }}">Order Details</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <h3>No order history so far. Try buy something first.</h2>
      {% endif %}
    {% else %}
      <h3>You are seeing this because you are in Seller view. Switch to Buyer view to view your order history.</h2>
    {% endif %}
  {% else %}
      <p><a href="{{ url_for('users.login') }}">Log in</a> to see your review history!</p>
  {% endif %}
{% endblock %}